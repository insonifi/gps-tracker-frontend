{"ts":1377195845956,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*\n * angular-socket-io v0.2.0\n * (c) 2013 Brian Ford http://briantford.com\n * License: MIT\n */\n\n'use strict';\n\nangular.module('btford.socket-io', []).\n  provider('socket', function () {\n\n    // when forwarding events, prefix the event name\n    var prefix = 'socket:',\n      ioSocket;\n\n    // expose to provider\n    this.$get = function ($rootScope, $timeout) {\n\n      var socket = ioSocket || io.connect();\n\n      var asyncAngularify = function (callback) {\n        return function () {  \n          var args = arguments;\n          $timeout(function () {\n            callback.apply(socket, args);\n          }, 0);\n        };\n      };\n\n      var addListener = function (eventName, callback) {\n        socket.on(eventName, asyncAngularify(callback));\n      };\n\n      var wrappedSocket = {\n        on: addListener,\n        addListener: addListener,\n\n        emit: function (eventName, data, callback) {\n          if (callback) {\n            socket.emit(eventName, data, asyncAngularify(callback));\n          } else {\n            socket.emit(eventName, data);\n          }\n        },\n\n        removeListener: function () {\n          var args = arguments;\n          return socket.removeListener.apply(socket, args);\n        },\n\n        // when socket.on('someEvent', fn (data) { ... }),\n        // call scope.$broadcast('someEvent', data)\n        forward: function (events, scope) {\n          if (events instanceof Array === false) {\n            events = [events];\n          }\n          if (!scope) {\n            scope = $rootScope;\n          }\n          events.forEach(function (eventName) {\n            var prefixed = prefix + eventName;\n            var forwardEvent = asyncAngularify(function (data) {\n              scope.$broadcast(prefixed, data);\n            });\n            scope.$on('$destroy', function () {\n              socket.removeListener(eventName, forwardEvent);\n            });\n            socket.on(eventName, forwardEvent);\n          });\n        }\n      };\n\n      return wrappedSocket;\n    };\n\n    this.prefix = function (newPrefix) {\n      prefix = newPrefix;\n    };\n\n    this.ioSocket = function (socket) {\n      ioSocket = socket;\n    };\n  });\n"]],"start1":0,"start2":0,"length1":0,"length2":2160}]],"length":2160}
{"ts":1377196619359,"patch":[[{"diffs":[[0,"connect("],[1,"window.location.host"],[0,");\n\n    "]],"start1":397,"start2":397,"length1":16,"length2":36}]],"length":2180,"saved":false}
{"ts":1377196622116,"patch":[[{"diffs":[[0,"ion.host"],[1," + \"\""],[0,");\n\n    "]],"start1":417,"start2":417,"length1":16,"length2":21}]],"length":2185,"saved":false}
{"ts":1377196622524,"patch":[[{"diffs":[[0,"host + \""],[1,":"],[0,"\");\n\n   "]],"start1":421,"start2":421,"length1":16,"length2":17}]],"length":2186,"saved":false}
{"ts":1377196631310,"patch":[[{"diffs":[[0,"ost + \":"],[1,"8000"],[0,"\");\n\n   "]],"start1":422,"start2":422,"length1":16,"length2":20}]],"length":2190,"saved":false}
